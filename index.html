<!DOCTYPE html>
<html lang="en">
<head>
  <title>Coffee Log</title>

  <!-- StackMob Dependencies -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.9.1-bundled-min.js"></script>

  <!-- Libraries -->
  <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
  <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
  <link href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" rel="stylesheet">
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <script type="text/javascript" src="timeentry/jquery.timeentry.js"></script>
  <link href="timeentry/jquery.timeentry.css" rel="stylesheet">
  <script type="text/javascript">
  $(function () {
    $('.time_entry_sec').timeEntry({
      show24Hours: true,
      showSeconds: true,
      timeSteps: [1, 1, 1],
      defaultTime: '00:00:00',
      spinnerImage: 'timeentry/spinnerDefault.png',
      initialField: 2,
      appendText: ' (--:--:sec)'
    });
  });
  $(function () {
    $('.time_entry_min').timeEntry({
      show24Hours: true,
      showSeconds: true,
      timeSteps: [1, 1, 1],
      defaultTime: '00:00:00',
      spinnerImage: 'timeentry/spinnerDefault.png',
      initialField: 1,
      appendText: ' (--:min:sec)'
    });
  });
  </script>

  <!-- Site Dependencies -->
  <script type="text/javascript" src="site.js"></script>
  <link rel="stylesheet" href="site.css">

  <!-- Page Code -->
  <script type="text/javascript">
  /* <![CDATA[ */
    $(document).ready(function(){

      /* On Page Load */
      if (getParameterByName('message')!=""){
        $("#status").addClass("alert alert-success").html(getParameterByName('message'));
      }

      var locationCoffees;

      StackMob.getLoggedInUser( {
        success: function(name){
          var user = new StackMob.User({
            username : name
          });
          user.fetchExpanded(2, {

            success : function(model){

              // Get all coffees for that location and display, all for admin
              var q = new StackMob.Collection.Query();
              q.equals('active', true);

              if (!model.get('admin')) {
                var locationObject = new Loc(model.get('location'));
                if (typeof locationObject !== 'undefined') {
                  // Display Location of user
                  $('#usersLocation').append(
                    "Logged in at " + locationObject.get("name")
                  );
                  q.mustBeOneOf("locations", locationObject.get('location_id'));
                } else {
                  console.log('No Location object found');
                }
              } else {
                  $('#usersLocation').append(
                      "Logged in as an admin."
                  ); 
              }
              var coffees = new Coffees();
              coffees.query(q, {
                success: function(collection) {

                  if (typeof collection !== 'undefined') {
                    locationCoffees = collection.sortBy( function(model) {
                    return model.get('name');
                    });

                    _.each(locationCoffees, function(model) {
                      $("#coffeesListForLocation").append(
                        $('<option></option>').val(model.get('coffee_id')).html(model.get('name'))
                      );
                    });
                  }
                },
                error: function(model, response) {
                  console.log("Bad coffee query");
                }
              });
            },
            error : function(model, response){
              console.log("Error: " + response);
            }

          });
        },
        error : function(model, response) {
          console.log("Error: " + response);
        }
      });

      function submitEspressoNote(json){
        console.log('submitting espresso note');
        $("#espresso_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new EspressoNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new espresso note");
          },
          error : function(model, response) {
            $("#espresso_note_submission_message").append("Error creating new espresso note.");
          }
        })
      };

      function submitDripNote(json){
        console.log('submitting bonmac note');
        $("#drip_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new DripNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new drip note");
          },
          error : function(model, response) {
            $("#drip_note_submission_message").append("Error creating new drip note.");
          }
        })
      };

      function submitBeehouseNote(json){
        console.log('submitting beehouse note');
        $("#beehouse_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new BeehouseNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new beehouse note");
          },
          error : function(model, response) {
            $("#beehouse_note_submission_message").append("Error creating new beehouse note.");
          }
        })
      };

      function submitSiphonNote(json){
        console.log('submitting siphon note');
        $("#siphon_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new SiphonNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new siphon note");
          },
          error : function(model, response) {
            $("#siphon_note_submission_message").append("Error creating new siphon note!");
          }
        })
      };

      function submitNelNote (json) {
        console.log('submitting nel note');
        $("#nel_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new NelNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new nel note");
          },
          error : function(model, response) {
            $("#nel_note_submission_message").append("Error creating new nel note.");
          }
        })
      }

      function submitChemexNote (json) {
        console.log('submitting chemex note');
        $("#chemex_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new ChemexNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new chemex note");
          },
          error : function(model, response) {
            $("#chemex_note_submission_message").append("Error creating new chemex note.");
          }
        })
      }

      function submitCuppingNote(json) {
        console.log('submitting cupping note');
        $("#cupping_note_submission_message").html("");
        json.roast_date = undefined;
        var newNote = new CuppingNote(json);
        newNote.create({
          success : function (model) {
            refreshWithMessage("Successfully created new cupping note.");
          },
          error : function(model, response) {
            $("#cupping_note_submission_message").append("Error creating new cupping note.");
          }
        })
      }

      function submitNote(json){
        console.log('submitting note');
        var newNote = new Note(json);
        newNote.create({
          success : function (model) {
            // Pull note
            refreshWithMessage("Successfully created new espresso note");
          },
          error : function(model, response) {
            console.debug("Error" + response);
            // Add banner message?
            // $("#espresso_note_submission_message").append("Error creating new espresso note.");
          }
        })
      };

      function isValidated(form) {
        if (!form.barista_name) {
          window.alert("Please enter a barista name!");
          return false;
        }
        if (!form.roastdate) {
          window.alert("Please enter a roast date!");
          return false;
        }
        var today = new Date().getTime();
        if (form.roastdate > today) {
          window.alert("The roast date you chose is in the future!");
          return false;
        }
        if (!form.preparation_date) {
          window.alert("Please enter a preparation date!");
          return false;
        }
        if (form.preparation_date > today) {
          window.alert("The preparation date you chose is in the future!");
          return false;
        }

        return true;
      }

      $("#espresso_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );

        // Validation
        if(!isValidated(jsonForm)) {
          return;
        }

        jsonForm["prep_method"] = "espresso";
        jsonForm["coffee"] = $("#coffeesListForLocation").val();
        jsonForm["espresso_prep_type"] = $("#espresso_prep_type").val();
        jsonForm["dial_in_difficulty"] = $("#dial_in_difficulty_espresso").val();

        submitNote(jsonForm);

      });

      $("#drip_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );
        jsonForm["dial_in_difficulty"] = $("#dial_in_difficulty_drip").val();

        console.log(jsonForm);
        var roastQuery = new StackMob.Collection.Query();

        if (!jsonForm.roast_date) {
          // Handle error
        }

        roastQuery.equals('date', jsonForm.roast_date).equals('coffee', $("#coffeesListForLocation").val());


        roasts.query(roastQuery, {
          success: function(col){
            if (col.length == 0) {
              // Create new roast
              console.log("Creating new roast");
              var newRoast = new Roast({
                date : jsonForm.roast_date,
                coffee : $("#coffeesListForLocation").val()
              });
              newRoast.create({
                success : function(model){
                  jsonForm["roast"] = model.get('roast_id');
                  submitDripNote(jsonForm);
                },
                error : function(model, response){}
              });
            } else {
              // make check for 1 item only
              jsonForm["roast"] = col.at(0).get('roast_id');
              submitDripNote(jsonForm);
            }
          },
          error : function(model, response){}
        });

      });

      $("#beehouse_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );
        jsonForm["dial_in_difficulty"] = $("#dial_in_difficulty_beehouse").val();

        console.log(jsonForm);
        var roastQuery = new StackMob.Collection.Query();

        if (!jsonForm.roast_date) {
          // Handle error
        }

        roastQuery.equals('date', jsonForm.roast_date).equals('coffee', $("#coffeesListForLocation").val());


        roasts.query(roastQuery, {
          success: function(col){
            if (col.length == 0) {
              // Create new roast
              console.log("Creating new roast");
              var newRoast = new Roast({
                date : jsonForm.roast_date,
                coffee : $("#coffeesListForLocation").val()
              });
              newRoast.create({
                success : function(model){
                  jsonForm["roast"] = model.get('roast_id');
                  submitBeehouseNote(jsonForm);
                },
                error : function(model, response){}
              });
            } else {
              // make check for 1 item only
              jsonForm["roast"] = col.at(0).get('roast_id');
              submitBeehouseNote(jsonForm);
            }
          },
          error : function(model, response){}
        });

      });

      $("#siphon_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );
        jsonForm["dial_in_difficulty"] = $("#dial_in_difficulty_siphon").val();

        console.log(jsonForm);
        var roastQuery = new StackMob.Collection.Query();

        if (!jsonForm.roast_date) {
          // Handle error
        }

        roastQuery.equals('date', jsonForm.roast_date).equals('coffee', $("#coffeesListForLocation").val());


        roasts.query(roastQuery, {
          success: function(col){
            if (col.length == 0) {
              // Create new roast
              console.log("Creating new roast");
              var newRoast = new Roast({
                date : jsonForm.roast_date,
                coffee : $("#coffeesListForLocation").val()
              });
              newRoast.create({
                success : function(model){
                  jsonForm["roast"] = model.get('roast_id');
                  submitSiphonNote(jsonForm);
                },
                error : function(model, response){}
              });
            } else {
              // make check for 1 item only
              jsonForm["roast"] = col.at(0).get('roast_id');
              submitSiphonNote(jsonForm);
            }
          },
          error : function(model, response){}
        });

      });

      $("#nel_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );
        jsonForm["dial_in_difficulty"] = $("#dial_in_difficulty_nel").val();

        console.log(jsonForm);
        var roastQuery = new StackMob.Collection.Query();

        if (!jsonForm.roast_date) {
          // Handle error
        }

        roastQuery.equals('date', jsonForm.roast_date).equals('coffee', $("#coffeesListForLocation").val());


        roasts.query(roastQuery, {
          success: function(col){
            if (col.length == 0) {
              // Create new roast
              console.log("Creating new roast");
              var newRoast = new Roast({
                date : jsonForm.roast_date,
                coffee : $("#coffeesListForLocation").val()
              });
              newRoast.create({
                success : function(model){
                  jsonForm["roast"] = model.get('roast_id');
                  submitNelNote(jsonForm);
                },
                error : function(model, response){}
              });
            } else {
              // make check for 1 item only
              jsonForm["roast"] = col.at(0).get('roast_id');
              submitNelNote(jsonForm);
            }
          },
          error : function(model, response){}
        });

      });

      $("#chemex_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );
        jsonForm["dial_in_difficulty"] = $("#dial_in_difficulty_chemex").val();

        console.log(jsonForm);
        var roastQuery = new StackMob.Collection.Query();

        if (!jsonForm.roast_date) {
          // Handle error
        }

        roastQuery.equals('date', jsonForm.roast_date).equals('coffee', $("#coffeesListForLocation").val());


        roasts.query(roastQuery, {
          success: function(col){
            if (col.length == 0) {
              // Create new roast
              console.log("Creating new roast");
              var newRoast = new Roast({
                date : jsonForm.roast_date,
                coffee : $("#coffeesListForLocation").val()
              });
              newRoast.create({
                success : function(model){
                  jsonForm["roast"] = model.get('roast_id');
                  submitChemexNote(jsonForm);
                },
                error : function(model, response){}
              });
            } else {
              // make check for 1 item only
              jsonForm["roast"] = col.at(0).get('roast_id');
              submitChemexNote(jsonForm);
            }
          },
          error : function(model, response){}
        });

      });

      $("#cupping_note_form").submit(function(e){
        e.preventDefault();

        var jsonForm = parseInputs( $(this).find('input, textarea') );

        console.log(jsonForm);
        var roastQuery = new StackMob.Collection.Query();

        if (!jsonForm.roast_date) {
          // Handle error
        }

        roastQuery.equals('date', jsonForm.roast_date).equals('coffee', $("#coffeesListForLocation").val());


        roasts.query(roastQuery, {
          success: function(col){
            if (col.length == 0) {
              // Create new roast
              console.log("Creating new roast");
              var newRoast = new Roast({
                date : jsonForm.roast_date,
                coffee : $("#coffeesListForLocation").val()
              });
              newRoast.create({
                success : function(model){
                  jsonForm["roast"] = model.get('roast_id');
                  submitCuppingNote(jsonForm);
                },
                error : function(model, response){}
              });
            } else {
              // make check for 1 item only
              jsonForm["roast"] = col.at(0).get('roast_id');
              submitCuppingNote(jsonForm);
            }
          },
          error : function(model, response){}
        });

      });

    });
  /* ]]> */
  </script>

</head>
<body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Coffee Log</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="active"><a href="/">Home</a></li>
            <li class="admin"><a href="/admin.html">Admin</a></li>
            <li><a href="/data.html">Data</a></li>
            <!--<li><a href="/login.html">Login</a></li>-->
            <li><a href="/login.html?logout=true">Logout</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span12">
      <div id="status"></div>
    </div>
  </div>

  <div class="container">
    <div class="row-fluid">
      <div class="span8 offset2">
        <h4 class="current-location"></h4>
        <h4 id="usersLocation"></h4>
        <h4>Pick your coffee:</h4>
        <select id="coffeesListForLocation"></select><br />

        <ul class="nav nav-tabs" id="myTab" data-tabs="tabs">
          <li class="active"><a href="#espresso" data-toggle="tab">Espresso</a></li>
          <li><a href="#drip" data-toggle="tab">Bonmac</a></li>
          <li><a href="#beehouse" data-toggle="tab">Beehouse</a></li>
          <li><a href="#siphon" data-toggle="tab">Siphon</a></li>
          <li><a href="#nel" data-toggle="tab">Nel</a></li>
          <li><a href="#chemex" data-toggle="tab">Chemex</a></li>
          <li><a href="#cupping" data-toggle="tab">Cupping</a></li>
        </ul>

        <div class="tab-content">

          <div class="tab-pane active" id="espresso">

            <div id="espresso_note">
              <form id="espresso_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roastdate" class="date-input">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">

                    <div class="clear"></div>
                    <span style="float:left;">Shift:<span>

                    <label class="radio inline">
                      <input type="radio" name="shift" value="AM" class="shift" checked="true"> AM
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="shift" value="PM" class="shift"> PM
                    </label>
                    <label>Preparation Type:</label>
                    <select id="espresso_prep_type">
                      <option value="Espresso">Espresso</option>
                      <option value="Cappuccino">Cappuccino</option>
                      <option value="Gibraltar">Gibraltar</option>
                      <option value= "Latte">Latte</option>
                      <option value="Macchiato">Macchiato</option>
                    </select>
                    <label>Dial In Difficulty:</label>
                    <select id="dial_in_difficulty_espresso">
                      <option value="Extremely Easy">Very Easy</option>
                      <option value="Easy">Easy</option>
                      <option value="Moderate">Moderate</option>
                      <option value= "Difficult">Difficult</option>
                      <option value="Extremely Difficult">Extremely Difficult</option>
                    </select>
                    <label>Weight Of Dose:</label> <input type="number" step="any" name="weight_of_dose"> grams
                    <label>Weight Of Yield:</label> <input type="number" step="any" name="weight_of_yield"> grams
                  </div>
                  <div class="span6">
                    <label>Temp Of Water:</label> <input type="number" step="any" name="temp_of_water"> &deg;F
                    <label>Preinfuse Time:</label> <input type="text" size="10" class="time_entry_sec" name="preinfuse_time">
                    <label>Total Extraction Time:</label> <input type="text" size="10" class="time_entry_sec" name="total_extraction_time">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->
                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Espresso Note"></input>
                    <p></p><p id="espresso_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

          </div>

          <div class="tab-pane" id="drip">

            <div id="drip_note">
              <form id="drip_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roast_date" class="date-input">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">

                    <div class="clear"></div>
                    <span style="float:left;">Shift:<span>

                    <label class="radio inline">
                      <input type="radio" name="shift" value="AM" class="shift" checked="true"> AM
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="shift" value="PM" class="shift"> PM
                    </label>

                    <label>Dial In Difficulty:</label>
                    <select id="dial_in_difficulty_drip">
                      <option value="Extremely Easy">Very Easy</option>
                      <option value="Easy">Easy</option>
                      <option value="Moderate">Moderate</option>
                      <option value= "Difficult">Difficult</option>
                      <option value="Extremely Difficult">Extremely Difficult</option>
                    </select>
                    <label>Dose Of Coffee:</label> <input type="number" step="any" name="dose_of_coffee"> grams
                    <label>Dose Of Water:</label> <input type="number" step="any" name="dose_of_water"> grams
                    <label>Temp Of Water:</label> <input type="number" step="any" name="temp_of_water"> &deg;F
                  </div>
                  <div class="span6">
                    <label>Grind Setting:</label> <input type="number" step="any" name="grind">
                    <label>Bloom Time:</label> <input type="text" size="10" class="time_entry_sec" name="bloom_time">
                    <span style="float:left;">Milk:<span>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="YES" class="milk"> YES
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="NO" class="milk" checked="true"> NO
                    </label>
                    <p></p>
                    <label>Total Extraction Time:</label> <input type="text" size="10" class="time_entry_min" name="total_extraction_time">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->
                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Bonmac Note"></input>
                    <p></p><p id="drip_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

          </div>

          <div class="tab-pane" id="beehouse">

            <div id="beehouse_note">
              <form id="beehouse_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roast_date" class="date-input">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">

                    <div class="clear"></div>
                    <span style="float:left;">Shift:<span>

                    <label class="radio inline">
                      <input type="radio" name="shift" value="AM" class="shift" checked="true"> AM
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="shift" value="PM" class="shift"> PM
                    </label>

                    <label>Dial In Difficulty:</label>
                    <select id="dial_in_difficulty_beehouse">
                      <option value="Extremely Easy">Very Easy</option>
                      <option value="Easy">Easy</option>
                      <option value="Moderate">Moderate</option>
                      <option value= "Difficult">Difficult</option>
                      <option value="Extremely Difficult">Extremely Difficult</option>
                    </select>
                    <label>Dose Of Coffee:</label> <input type="number" step="any" name="dose_of_coffee"> grams
                    <label>Dose Of Water:</label> <input type="number" step="any" name="dose_of_water"> grams
                    <label>Temp Of Water:</label> <input type="number" step="any" name="temp_of_water"> &deg;F
                  </div>
                  <div class="span6">
                    <label>Grind Setting:</label> <input type="number" step="any" name="grind">
                    <label>Bloom Time:</label> <input type="text" size="10" class="time_entry_sec" name="bloom_time">
                    <span style="float:left;">Milk:<span>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="YES" class="milk"> YES
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="NO" class="milk" checked="true"> NO
                    </label>
                    <p></p>
                    <label>Total Extraction Time:</label> <input type="text" size="10" class="time_entry_min" name="total_extraction_time">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->
                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Beehouse Note"></input>
                    <p></p><p id="beehouse_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

          </div>

          <div class="tab-pane" id="siphon">

            <div id="siphon_note">
              <form id="siphon_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roast_date" class="date-input">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">

                    <div class="clear"></div>
                    <span style="float:left;">Shift:<span>

                    <label class="radio inline">
                      <input type="radio" name="shift" value="AM" class="shift" checked="true"> AM
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="shift" value="PM" class="shift"> PM
                    </label>

                    <label>Dial In Difficulty:</label>
                    <select id="dial_in_difficulty_siphon">
                      <option value="Extremely Easy">Very Easy</option>
                      <option value="Easy">Easy</option>
                      <option value="Moderate">Moderate</option>
                      <option value= "Difficult">Difficult</option>
                      <option value="Extremely Difficult">Extremely Difficult</option>
                    </select>
                    <label>Dose Of Coffee:</label> <input type="number" step="any" name="dose_of_coffee"> grams
                    <label>Weight Of Water:</label> <input type="number" step="any" name="weight_of_water"> grams
                    <label>Temp Of Water:</label> <input type="number" step="any" name="temp_of_water"> &deg;F
                  </div>
                  <div class="span6">
                    <label>Grind Setting:</label> <input type="number" step="any" name="grind">
                    <label>Off Heat Time:</label> <input type="text" size="10" class="time_entry_min" name="off_heat_time">
                    <label>Agitation Notes:</label> <textarea type="text" name="agitation_notes"></textarea>
                    <label>Total Extraction Time:</label> <input type="text" size="10" class="time_entry_min" name="total_extraction_time">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->
                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Siphon Note"></input>
                    <p></p><p id="siphon_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

          </div>

        <div class="tab-pane" id="nel">

            <div id="nel_note">
              <form id="nel_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roast_date" class="date-input">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">

                    <div class="clear"></div>
                    <span style="float:left;">Shift:<span>

                    <label class="radio inline">
                      <input type="radio" name="shift" value="AM" class="shift" checked="true"> AM
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="shift" value="PM" class="shift"> PM
                    </label>

                    <label>Dial In Difficulty:</label>
                    <select id="dial_in_difficulty_nel">
                      <option value="Extremely Easy">Very Easy</option>
                      <option value="Easy">Easy</option>
                      <option value="Moderate">Moderate</option>
                      <option value= "Difficult">Difficult</option>
                      <option value="Extremely Difficult">Extremely Difficult</option>
                    </select>

                    <label>Dose Of Coffee:</label> <input type="number" step="any" name="dose_of_coffee"> grams
                    <label>Dose Of Water:</label> <input type="number" step="any" name="dose_of_water"> grams
                    <label>Temp Of Water:</label> <input type="number" step="any" name="temp_of_water"> &deg;F
                  </div>
                  <div class="span6">
                    <label>Grind Setting:</label> <input type="number" step="any" name="grind">
                    <label>Bloom Time:</label> <input type="text" size="10" class="time_entry_sec" name="bloom_time">
                    <span style="float:left;">Milk:<span>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="YES" class="milk"> YES
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="NO" class="milk" checked="true"> NO
                    </label>
                    <p></p>
                    <label>Total Extraction Time:</label> <input type="text" size="10" class="time_entry_min" name="total_extraction_time">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->
                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Nel Note"></input>
                    <p></p><p id="nel_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

        </div>

          <div class="tab-pane" id="chemex">

            <div id="chemex_note">
              <form id="chemex_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roast_date" class="date-input">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">

                    <div class="clear"></div>
                    <span style="float:left;">Shift:<span>

                    <label class="radio inline">
                      <input type="radio" name="shift" value="AM" class="shift" checked="true"> AM
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="shift" value="PM" class="shift"> PM
                    </label>

                    <label>Dial In Difficulty:</label>
                    <select id="dial_in_difficulty_chemex">
                      <option value="Extremely Easy">Very Easy</option>
                      <option value="Easy">Easy</option>
                      <option value="Moderate">Moderate</option>
                      <option value= "Difficult">Difficult</option>
                      <option value="Extremely Difficult">Extremely Difficult</option>
                    </select>

                    <label>Dose Of Coffee:</label> <input type="number" step="any" name="dose_of_coffee"> grams
                    <label>Dose Of Water:</label> <input type="number" step="any" name="dose_of_water"> grams
                    <label>Temp Of Water:</label> <input type="number" step="any" name="temp_of_water"> &deg;F

                  </div>
                  <div class="span6">
                    <label>Grind Setting:</label> <input type="number" step="any" name="grind">
                    <label>Bloom Time:</label> <input type="text" size="10" class="time_entry_sec" name="bloom_time">
                    <span style="float:left;">Milk:<span>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="YES" class="milk"> YES
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="milk" value="NO" class="milk" checked="true"> NO
                    </label>
                    <p></p>
                    <label>Total Extraction Time:</label> <input type="text" size="10" class="time_entry_min" name="total_extraction_time">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->
                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Chemex Note"></input>
                    <p></p><p id="chemex_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

          </div>

          <div class="tab-pane" id="cupping">

            <div id="cupping_note">
              <form id="cupping_note_form">
                <div class="row-fluid">
                  <div class="span6">
                    <label>Barista Name:</label><input type="text" name="barista_name">
                    <label>Roast Date:</label> <input type="text" name="roast_date" class="date-input">
                    <label>Roast ID:</label> <input type="number" name="roast_id">
                    <label>Preparation Date:</label> <input type="text" name="preparation_date" class="date-input">
                    <!--
                    <label>Fragrance / Aroma:</label> <input type="text" name="fragrance_aroma">
                    <label>Acidity:</label> <input type="text" name="acidity">
                    <label>Mouthfeel:</label> <input type="text" name="mouthfeel">
                    -->
                  </div>
                  <div class="span6">
                    <!--
                    <label>Flavor:</label> <textarea type="text" name="flavor"></textarea>
                    <label>Aftertaste:</label> <input type="text" name="aftertaste">
                  -->

                    <label>Positive Tasting Attributes:</label> <textarea type="text" name="positive_notes"></textarea>
                    <label>Negative Tasting Attributes:</label> <textarea type="text" name="negative_notes"></textarea>
                    <label>Additional Comments:</label> <textarea type="text" name="additional_comments"></textarea>
                    
                    <span style="float:left;">True To Intent:<span>
                    <label class="radio inline">
                      <input type="radio" name="true_to_intent" value="YES" class="true_to_intent"> YES
                    </label>
                    <label class="radio inline">
                      <input type="radio" name="true_to_intent" value="NO" class="true_to_intent" checked="true"> NO
                    </label>
                    <p></p>

                    <label>Overall Score:</label> <input type="number" step="any" name="score">
                  </div>
                </div>
                <div class="row">
                  <div class="span6 offset6">
                    <input class="login btn btn-primary" type="submit" value="Submit Cupping Note"></input>
                    <p></p><p id="cupping_note_submission_message"></p><p></p>
                  </div>
                </div>

              </form>
            </div>

          </div>

        <script>
          $(document).ready(function(){
            $('#myTab').tab();
            $('#myTab a').click(function (e) {
              e.preventDefault();
              $(this).tab('show');
            })
          });
        </script>

      </div>
    </div>

  </div>
</body>
</html>

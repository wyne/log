<html>
<head>
  <title>Admin</title>

  <!-- StackMob Dependencies -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.8.0-bundled-min.js"></script>

  <!-- Site Dependencies -->
  <script type="text/javascript" src="site.js"></script>
  <link rel="stylesheet" href="site.css">

  <!-- Page Code -->
  <script type="text/javascript">
  /* <![CDATA[ */
    $(document).ready(function(){
    
		locations.query(qAll, {
    		success: function(col){
      			col.each(function(model){
        			$(".locationsList").append(
        				$('<option></option>').val(model.get('location_id')).html(model.get('name'))
        		)	;
   	   			})
   	 		},
	   	 	error: function(){ console.log("bad"); }
	  	});
	  	
	$('#newuser').click(function(){
    	var newUser = new StackMob.User({
        username : $('.username').val(),
        password : $('.password').val(),
        location : $('.locationsList').val()
      });
    	console.log(newUser);
    	newUser.create({
    	
    		success: function(model){
    			$("#status").html('Successfully created user ' + model.get('username') + ' who works at ' + $('.locationsList option:selected').text() + '.');
    		},
    		error: function(){ console.log("bad"); }
    	});
    });

    });
    
    
    
  /* ]]> */
  </script>

</head>
<body>
  <div id="status"></div>
  New User:<br /><br />
    Username: <input name="username" class="username" type="text"></input><br />
    Password: <input name="password" class="password" type="password"></input><br />
    Location:
    <select class="locationsList">
    </select>
    <br />
    <input id="newuser" type="button" value="Submit"></input>
    <br />
    <br />
    New Location:<br />
</body>
</html>
